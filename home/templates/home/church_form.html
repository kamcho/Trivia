{% extends "base.html" %}

{% block title %}Create Church · BibleTrivia{% endblock %}

{% block content %}
<section class="py-10">
    <div class="max-w-3xl mx-auto">
        <h1 class="text-3xl font-extrabold bg-gradient-to-r from-indigo-400 via-emerald-300 to-cyan-300 bg-clip-text text-transparent">Register a Church</h1>
        <p class="text-slate-300 mt-2">Provide church details to participate in cohorts and leaderboards.</p>
        <form method="post" enctype="multipart/form-data" class="mt-6 space-y-5">
            {% csrf_token %}
            {{ form.non_field_errors }}

            <div class="grid sm:grid-cols-2 gap-4">
                <div>
                    <label class="block text-sm text-slate-300 mb-1">Name</label>
                    {{ form.name }}
                    {{ form.name.errors }}
                </div>
                <div>
                    <label class="block text-sm text-slate-300 mb-1">Category</label>
                    {{ form.category }}
                    {{ form.category.errors }}
                </div>
            </div>

            <div class="grid sm:grid-cols-2 gap-4">
                <div>
                    <label class="block text-sm text-slate-300 mb-1">Address</label>
                    {{ form.address }}
                    {{ form.address.errors }}
                </div>
                <div>
                    <label class="block text-sm text-slate-300 mb-1">City</label>
                    {{ form.city }}
                    {{ form.city.errors }}
                </div>
            </div>

            <div class="grid sm:grid-cols-2 gap-4">
                <div>
                    <label class="block text-sm text-slate-300 mb-1">Location</label>
                    {{ form.location }}
                    {{ form.location.errors }}
                </div>
                <div>
                    <label class="block text-sm text-slate-300 mb-1">Country</label>
                    {{ form.country }}
                    {{ form.country.errors }}
                </div>
            </div>

            <div class="grid sm:grid-cols-2 gap-4">
                <div>
                    <label class="block text-sm text-slate-300 mb-1">Contact Email</label>
                    {{ form.contact_email }}
                    {{ form.contact_email.errors }}
                </div>
                <div>
                    <label class="block text-sm text-slate-300 mb-1">Phone Number</label>
                    {{ form.phone_number }}
                    {{ form.phone_number.errors }}
                </div>
            </div>

            <div class="grid sm:grid-cols-2 gap-4">
                <div>
                    <label class="block text-sm text-slate-300 mb-1">Website</label>
                    {{ form.website }}
                    {{ form.website.errors }}
                </div>
                <div>
                    <label class="block text-sm text-slate-300 mb-1">Established Year</label>
                    {{ form.established_year }}
                    {{ form.established_year.errors }}
                </div>
            </div>

            <div>
                <label class="block text-sm text-slate-300 mb-2">Church Logo</label>
                <div class="logo-upload-container">
                    {{ form.logo }}
                    <label for="logo-upload" class="flex flex-col items-center justify-center w-full h-32 border-2 border-slate-600 border-dashed rounded-lg cursor-pointer bg-slate-800/30 hover:bg-slate-800/50 transition-all duration-200">
                        <div class="flex flex-col items-center justify-center pt-5 pb-6">
                            <div class="text-3xl mb-2">☁️</div>
                            <p class="mb-2 text-sm text-slate-400">
                                <span class="font-semibold">Click to upload</span> church logo
                            </p>
                            <p class="text-xs text-slate-500">PNG, JPG or JPEG (MAX. 5MB)</p>
                        </div>
                    </label>
                    <div id="file-name" class="mt-2 text-sm text-slate-400 hidden"></div>
                </div>
                {{ form.logo.errors }}
            </div>

            <div class="flex items-center gap-2">
                {{ form.is_active }}
                <label class="text-sm text-slate-300">Active</label>
            </div>

            <div class="flex gap-3 pt-2">
                <button type="submit" class="bg-emerald-500 hover:bg-emerald-400 text-emerald-900 font-semibold px-4 py-2 rounded-lg shadow-lg">Save Church</button>
                <a href="{% url 'home' %}" class="bg-slate-800/60 hover:bg-slate-800 text-slate-100 border border-slate-600/50 px-4 py-2 rounded-lg">Cancel</a>
            </div>
        </form>
    </div>
    
</section>
{% endblock %}

{% block extra_js %}
<script>
document.addEventListener('DOMContentLoaded', function() {
    const logoInput = document.getElementById('logo-upload');
    const fileNameDiv = document.getElementById('file-name');
    const uploadLabel = document.querySelector('label[for="logo-upload"]');
    
    if (logoInput) {
        logoInput.addEventListener('change', function(e) {
            const file = e.target.files[0];
            if (file) {
                fileNameDiv.textContent = `Selected: ${file.name}`;
                fileNameDiv.classList.remove('hidden');
                
                // Update the upload area to show file is selected
                uploadLabel.classList.add('border-indigo-500', 'bg-indigo-900/20');
                uploadLabel.classList.remove('border-slate-600');
                
                // Change the cloud emoji to a check mark
                const emoji = uploadLabel.querySelector('.text-3xl');
                emoji.textContent = '✅';
                
                // Update text
                const uploadText = uploadLabel.querySelector('.font-semibold');
                uploadText.textContent = 'File selected! Click to change';
            } else {
                fileNameDiv.classList.add('hidden');
                uploadLabel.classList.remove('border-indigo-500', 'bg-indigo-900/20');
                uploadLabel.classList.add('border-slate-600');
                
                const emoji = uploadLabel.querySelector('.text-3xl');
                emoji.textContent = '☁️';
                
                const uploadText = uploadLabel.querySelector('.font-semibold');
                uploadText.textContent = 'Click to upload';
            }
        });
    }
});
</script>
{% endblock %}



