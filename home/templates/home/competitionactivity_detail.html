{% extends 'home/competition/base.html' %}

{% block breadcrumb %}
<li class="flex items-center">
    <i class="fas fa-angle-right text-gray-500 mx-2"></i>
    <a href="{% url 'competitionactivity_list' %}" class="text-sm font-medium text-gray-400 hover:text-white transition-colors">Activities</a>
</li>
<li class="flex items-center">
    <i class="fas fa-angle-right text-gray-500 mx-2"></i>
    <span class="text-sm font-medium text-gray-400">{{ activity.name|truncatechars:30 }}</span>
</li>
{% endblock %}

{% block header_title %}{{ activity.name }}{% endblock %}
{% block header_subtitle %}{{ activity.get_activity_type_display }}{% if activity.points %} • {{ activity.points }} points{% endif %}{% endblock %}

{% block header_actions %}
<div class="flex space-x-3">
    <a href="{% url 'competitionactivity_update' slug=activity.slug %}" 
       class="inline-flex items-center px-4 py-2 bg-indigo-600 hover:bg-indigo-500 text-white rounded-lg text-sm font-semibold transition-colors">
        <i class="fas fa-edit mr-2"></i> Edit
    </a>
    <a href="{% url 'competitionactivity_list' %}" 
       class="inline-flex items-center px-4 py-2 bg-slate-700 hover:bg-slate-600 text-white rounded-lg text-sm font-semibold transition-colors">
        <i class="fas fa-arrow-left mr-2"></i> Back to List
    </a>
</div>
{% endblock %}

{% block competition_content %}
<div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
    <!-- Main Content -->
    <div class="lg:col-span-2 space-y-6">
        <!-- Activity Header -->
        <div class="bg-slate-800/50 backdrop-blur-sm rounded-xl p-6 border border-slate-700/50">
            <div class="flex items-start justify-between">
                <div class="flex-1">
                    <div class="flex items-center">
                        <div class="flex-shrink-0 h-14 w-14 rounded-xl bg-indigo-600/20 text-indigo-300 flex items-center justify-center text-2xl mr-4">
                            <i class="fas fa-{{ activity.icon|default:'tasks' }}"></i>
                        </div>
                        <div class="flex-1 min-w-0">
                            <h1 class="text-2xl font-bold text-white truncate">{{ activity.name }}</h1>
                            <div class="flex flex-wrap items-center mt-1">
                                <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-slate-700/50 text-slate-300 mr-2 mb-1">
                                    {{ activity.get_activity_type_display }}
                                </span>
                                {% if activity.points %}
                                <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-amber-900/30 text-amber-300 mr-2 mb-1">
                                    <i class="fas fa-star mr-1"></i> {{ activity.points }} points
                                </span>
                                {% endif %}
                                {% if activity.is_featured %}
                                <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-purple-900/30 text-purple-300 mb-1">
                                    <i class="fas fa-star mr-1"></i> Featured
                                </span>
                                {% endif %}
                            </div>
                        </div>
                    </div>
                    
                    {% if activity.description %}
                    <div class="mt-4 prose prose-invert max-w-none">
                        <p class="text-gray-300">{{ activity.description }}</p>
                    </div>
                    {% endif %}
                </div>
            </div>
            
            <!-- Categories -->
            {% if activity.categories.exists %}
            <div class="mt-6 pt-5 border-t border-slate-700/50">
                <h3 class="text-sm font-medium text-gray-400 mb-2">Categories</h3>
                <div class="flex flex-wrap gap-2">
                    {% for category in activity.categories.all %}
                    <a href="{% url 'activitycategory_detail' slug=category.slug %}" 
                       class="inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-slate-700/50 text-slate-300 hover:bg-slate-600/50 transition-colors">
                        <i class="fas fa-tag text-xs mr-1.5 opacity-70"></i>
                        {{ category.name }}
                    </a>
                    {% endfor %}
                </div>
            </div>
            {% endif %}

            {% if related_questions %}
            <!-- Related Questions (Main Content) -->
            <div class="bg-slate-800/50 backdrop-blur-sm rounded-xl p-6 border border-slate-700/50 mt-6">
                <div class="flex items-center justify-between mb-3">
                    <h3 class="text-lg font-semibold text-white">Related Questions</h3>
                    <span class="text-xs text-slate-400">up to 3</span>
                </div>
                <ol class="space-y-3">
                    {% for q in related_questions %}
                    <li class="rounded-lg border border-slate-700/50 bg-slate-900/40 p-3">
                        <div class="text-sm text-slate-200">{{ q.question_text }}</div>
                        <div class="mt-2 text-xs text-slate-400">
                            <i class="fas fa-star mr-1"></i>{{ q.points }} pts
                        </div>
                    </li>
                    {% endfor %}
                </ol>
            </div>
            {% endif %}

            <!-- Related Quizzes (Main Content) -->
            <div class="bg-slate-800/50 backdrop-blur-sm rounded-xl p-6 border border-slate-700/50 mt-6">
                <div class="flex items-center justify-between mb-3">
                    <h3 class="text-lg font-semibold text-white">Related Quizzes</h3>
                    <span class="text-xs text-slate-400">up to 3</span>
                </div>
                {% if related_quizzes %}
                <ul class="space-y-3">
                    {% for quiz in related_quizzes %}
                    <li class="rounded-lg border border-slate-700/50 bg-slate-900/40 p-3 flex items-center justify-between">
                        <div class="min-w-0">
                            <div class="text-sm font-medium text-slate-200 truncate">{{ quiz.name }}</div>
                            <div class="text-xs text-slate-400">{{ quiz.get_quiz_type_display }} • {{ quiz.difficulty }}</div>
                        </div>
                        <a href="{% url 'quiz_detail' slug=quiz.slug %}" class="text-xs text-indigo-300 hover:text-indigo-200 whitespace-nowrap ml-3">
                            View <i class="fas fa-arrow-right ml-1"></i>
                        </a>
                    </li>
                    {% endfor %}
                </ul>
                {% else %}
                <div class="text-sm text-slate-400">No related quizzes yet.</div>
                {% endif %}
            </div>

            <!-- Tabs (Navigation + Panels in one Alpine scope) -->
            <div x-data="{ activeTab: 'instructions' }"
                 x-init="(() => { const hash = window.location.hash.substring(1); if (['instructions','rules','competitions'].includes(hash)) { activeTab = hash } $watch('activeTab', value => { window.location.hash = value }) })()"
                 class="mt-8">
                <div class="border-b border-slate-700/50">
                    <nav class="-mb-px flex space-x-8" aria-label="Tabs">
                        <button type="button" 
                                @click="activeTab = 'instructions'" 
                                :class="{ 'border-indigo-500 text-white': activeTab === 'instructions', 'border-transparent text-gray-400 hover:text-gray-300 hover:border-gray-300': activeTab !== 'instructions' }" 
                                class="whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm">
                            <i class="fas fa-list-ol mr-2"></i>Instructions
                        </button>
                        <button type="button" 
                                @click="activeTab = 'rules'" 
                                :class="{ 'border-indigo-500 text-white': activeTab === 'rules', 'border-transparent text-gray-400 hover:text-gray-300 hover:border-gray-300': activeTab !== 'rules' }" 
                                class="whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm">
                            <i class="fas fa-gavel mr-2"></i>Rules
                        </button>
                        <button type="button" 
                                @click="activeTab = 'competitions'" 
                                :class="{ 'border-indigo-500 text-white': activeTab === 'competitions', 'border-transparent text-gray-400 hover:text-gray-300 hover:border-gray-300': activeTab !== 'competitions' }" 
                                class="whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm">
                            <i class="fas fa-trophy mr-2"></i>Competitions
                            <span class="ml-1.5 py-0.5 px-2 text-xs rounded-full bg-slate-700/50 text-slate-300">{{ activity.competition_set.count }}</span>
                        </button>
                    </nav>
                </div>
                
                <!-- Tab Panels -->
                <!-- Instructions Panel -->
                <div x-show="activeTab === 'instructions'" x-transition:enter="transition ease-out duration-200" x-transition:enter-start="opacity-0" x-transition:enter-end="opacity-100">
                    <div class="bg-slate-800/50 backdrop-blur-sm rounded-xl p-6 border border-slate-700/50 mt-6">
                        <div class="flex items-center justify-between mb-4">
                            <h3 class="text-white font-semibold">Instructions</h3>
                            <a href="{% url 'competitionactivity_instructions_update' slug=activity.slug %}" class="text-sm text-indigo-300 hover:text-indigo-200"><i class="fas fa-edit mr-1"></i>Edit</a>
                        </div>
                        {% if activity_instructions %}
                        <ol class="list-decimal list-inside space-y-2 text-gray-200">
                            {% for instr in activity_instructions %}
                            <li>
                                <span>{{ instr.content }}</span>
                                {% if not instr.is_active %}
                                    <span class="ml-2 text-xs inline-flex items-center px-2 py-0.5 rounded-full bg-slate-700/60 text-slate-300 border border-slate-600/50">inactive</span>
                                {% endif %}
                                <span class="ml-2 text-xs text-slate-400">#{{ instr.order }}</span>
                            </li>
                            {% endfor %}
                        </ol>
                        {% else %}
                        <div class="text-center py-8">
                            <div class="text-gray-400 mb-4">
                                <i class="fas fa-list-ol text-4xl mb-2"></i>
                                <p class="text-lg">No instructions provided</p>
                            </div>
                            <p class="text-gray-500 mb-6 max-w-md mx-auto">
                                This activity doesn't have any specific instructions yet.
                            </p>
                            <a href="{% url 'competitionactivity_instructions_update' slug=activity.slug %}" 
                               class="inline-flex items-center px-4 py-2 bg-indigo-600 hover:bg-indigo-500 text-white rounded-lg text-sm font-medium transition-colors">
                                <i class="fas fa-edit mr-2"></i> Add Instructions
                            </a>
                        </div>
                        {% endif %}
                    </div>
                </div>
                
                <!-- Rules Panel -->
                <div x-show="activeTab === 'rules'" x-transition:enter="transition ease-out duration-200" x-transition:enter-start="opacity-0" x-transition:enter-end="opacity-100">
                    <div class="bg-slate-800/50 backdrop-blur-sm rounded-xl p-6 border border-slate-700/50 mt-6">
                        <div class="flex items-center justify-between mb-4">
                            <h3 class="text-white font-semibold">Rules</h3>
                            <a href="{% url 'competitionactivity_rules_update' slug=activity.slug %}" class="text-sm text-indigo-300 hover:text-indigo-200"><i class="fas fa-edit mr-1"></i>Edit</a>
                        </div>
                        {% if activity_rules %}
                        <ul class="list-disc list-inside space-y-2 text-gray-200">
                            {% for rule in activity_rules %}
                            <li>
                                <span>{{ rule.content }}</span>
                                {% if not rule.is_active %}
                                    <span class="ml-2 text-xs inline-flex items-center px-2 py-0.5 rounded-full bg-slate-700/60 text-slate-300 border border-slate-600/50">inactive</span>
                                {% endif %}
                                <span class="ml-2 text-xs text-slate-400">#{{ rule.order }}</span>
                            </li>
                            {% endfor %}
                        </ul>
                        {% else %}
                        <div class="text-center py-8">
                            <div class="text-gray-400 mb-4">
                                <i class="fas fa-gavel text-4xl mb-2"></i>
                                <p class="text-lg">No rules defined</p>
                            </div>
                            <p class="text-gray-500 mb-6 max-w-md mx-auto">
                                This activity doesn't have any specific rules defined yet.
                            </p>
                            <a href="{% url 'competitionactivity_rules_update' slug=activity.slug %}" 
                               class="inline-flex items-center px-4 py-2 bg-indigo-600 hover:bg-indigo-500 text-white rounded-lg text-sm font-medium transition-colors">
                                <i class="fas fa-edit mr-2"></i> Add Rules
                            </a>
                        </div>
                        {% endif %}
                    </div>
                </div>
                
                <!-- Competitions Panel -->
                <div x-show="activeTab === 'competitions'" x-transition:enter="transition ease-out duration-200" x-transition:enter-start="opacity-0" x-transition:enter-end="opacity-100">
                    <div class="bg-slate-800/50 backdrop-blur-sm rounded-xl p-6 border border-slate-700/50 mt-6">
                        {% if upcoming_competitions %}
                        <h3 class="text-lg font-semibold text-white mb-4">Upcoming Competitions</h3>
                        <div class="space-y-3">
                            {% for competition in upcoming_competitions %}
                            <div class="bg-slate-700/30 hover:bg-slate-700/50 rounded-lg p-4 border border-slate-700/50 transition-colors">
                                <div class="flex items-center justify-between">
                                    <div>
                                        <h4 class="font-medium text-white">{{ competition.name }}</h4>
                                        <div class="flex items-center text-xs text-gray-400 mt-1">
                                            <i class="far fa-calendar-alt mr-1"></i>
                                            {{ competition.start_date|date:"M d, Y" }}
                                            <span class="mx-1">•</span>
                                            <i class="fas fa-users mr-1"></i>
                                            {{ competition.participants.count }} participants
                                        </div>
                                    </div>
                                    <a href="{% url 'competition_detail' slug=competition.slug %}" class="text-indigo-400 hover:text-indigo-300 text-sm font-medium">
                                        View <i class="fas fa-arrow-right ml-1"></i>
                                    </a>
                                </div>
                            </div>
                            {% endfor %}
                        </div>
                        {% else %}
                        <div class="text-center py-8">
                            <div class="text-gray-400 mb-4">
                                <i class="fas fa-trophy text-4xl mb-2"></i>
                                <p class="text-lg">No upcoming competitions</p>
                            </div>
                            <p class="text-gray-500 mb-6 max-w-md mx-auto">
                                This activity isn't scheduled for any upcoming competitions yet.
                            </p>
                            <a href="{% url 'competition_create' %}?activity={{ activity.slug }}" 
                               class="inline-flex items-center px-4 py-2 bg-indigo-600 hover:bg-indigo-500 text-white rounded-lg text-sm font-medium transition-colors">
                                <i class="fas fa-plus mr-2"></i> Create Competition
                            </a>
                        </div>
                        {% endif %}
                        
                        {% if past_competitions %}
                        <div class="mt-8">
                            <h3 class="text-lg font-semibold text-white mb-4">Past Competitions</h3>
                            <div class="space-y-3">
                                {% for competition in past_competitions %}
                                <div class="bg-slate-800/30 hover:bg-slate-800/50 rounded-lg p-4 border border-slate-700/50 transition-colors">
                                    <div class="flex items-center justify-between">
                                        <div>
                                            <h4 class="font-medium text-white">{{ competition.name }}</h4>
                                            <div class="flex items-center text-xs text-gray-400 mt-1">
                                                <i class="far fa-calendar-alt mr-1"></i>
                                                {{ competition.start_date|date:"M d, Y" }}
                                                <span class="mx-1">•</span>
                                                <i class="fas fa-users mr-1"></i>
                                                {{ competition.participants.count }} participants
                                            </div>
                                        </div>
                                        <a href="{% url 'competition_detail' slug=competition.slug %}" class="text-indigo-400 hover:text-indigo-300 text-sm font-medium">
                                            View <i class="fas fa-arrow-right ml-1"></i>
                                        </a>
                                    </div>
                                </div>
                                {% endfor %}
                            </div>
                        </div>
                        {% endif %}
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Sidebar -->
        <div class="space-y-6">
            <!-- Activity Stats -->
            <div class="bg-slate-800/50 backdrop-blur-sm rounded-xl p-6 border border-slate-700/50">
                <h3 class="text-lg font-semibold text-white mb-4">Activity Stats</h3>
                
                <div class="space-y-4">
                    <div class="flex items-center justify-between">
                        <div class="flex items-center">
                            <div class="p-2 rounded-lg bg-indigo-600/20 text-indigo-300 mr-3">
                                <i class="fas fa-trophy"></i>
                            </div>
                            <div>
                                <p class="text-sm font-medium text-gray-300">Total Competitions</p>
                                <p class="text-2xl font-bold text-white">{{ activity.competition_set.count }}</p>
                            </div>
                        </div>
                    </div>
                    
                    <div class="flex items-center justify-between">
                        <div class="flex items-center">
                            <div class="p-2 rounded-lg bg-green-600/20 text-green-300 mr-3">
                                <i class="fas fa-users"></i>
                            </div>
                            <div>
                                <p class="text-sm font-medium text-gray-300">Total Participants</p>
                                <p class="text-2xl font-bold text-white">{{ total_participants|default:'0' }}</p>
                            </div>
                        </div>
                    </div>
                    
                    <div class="pt-4 border-t border-slate-700/50">
                        <p class="text-sm font-medium text-gray-300 mb-2">Activity Status</p>
                        <div class="flex items-center">
                            <span class="inline-flex items-center px-3 py-1 rounded-full text-xs font-medium {% if activity.is_active %}bg-green-900/30 text-green-300{% else %}bg-slate-700/50 text-slate-300{% endif %}">
                                {% if activity.is_active %}
                                <i class="fas fa-check-circle mr-1.5"></i> Active
                                {% else %}
                                <i class="fas fa-times-circle mr-1.5"></i> Inactive
                                {% endif %}
                            </span>
                            <span class="ml-2 text-xs text-gray-400">
                                {% if activity.is_active %}
                                This activity is visible in competitions
                                {% else %}
                                This activity is hidden from competitions
                                {% endif %}
                            </span>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Activity Details -->
            <div class="bg-slate-800/50 backdrop-blur-sm rounded-xl p-6 border border-slate-700/50">
                <h3 class="text-lg font-semibold text-white mb-4">Activity Details</h3>
                
                <div class="space-y-4">
                    <div>
                        <p class="text-sm font-medium text-gray-300">Created</p>
                        <p class="text-sm text-white">{{ activity.created_at|date:"F j, Y" }}</p>
                        <p class="text-xs text-gray-400">{{ activity.created_at|timesince }} ago</p>
                    </div>
                    
                    {% if activity.updated_at %}
                    <div class="pt-4 border-t border-slate-700/50">
                        <p class="text-sm font-medium text-gray-300">Last Updated</p>
                        <p class="text-sm text-white">{{ activity.updated_at|date:"F j, Y" }}</p>
                        <p class="text-xs text-gray-400">{{ activity.updated_at|timesince }} ago</p>
                        {% if activity.updated_by %}
                        <p class="text-xs text-gray-400 mt-1">
                            by {{ activity.updated_by.get_full_name|default:activity.updated_by.username }}
                        </p>
                        {% endif %}
                    </div>
                    {% endif %}
                    
                    <div class="pt-4 border-t border-slate-700/50">
                        <p class="text-sm font-medium text-gray-300 mb-2">Activity Type</p>
                        <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-slate-700/50 text-slate-300">
                            {{ activity.get_activity_type_display }}
                        </span>
                    </div>
                    
                    {% if activity.points %}
                    <div class="pt-4 border-t border-slate-700/50">
                        <p class="text-sm font-medium text-gray-300 mb-2">Points</p>
                        <div class="flex items-center">
                            <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-amber-900/30 text-amber-300">
                                <i class="fas fa-star mr-1"></i> {{ activity.points }} points
                            </span>
                        </div>
                    </div>
                    {% endif %}
                </div>
            </div>
            
            <!-- Quick Actions -->
            <div class="bg-slate-800/50 backdrop-blur-sm rounded-xl p-6 border border-slate-700/50">
                <h3 class="text-lg font-semibold text-white mb-4">Quick Actions</h3>
                
                <div class="space-y-3">
                    <a href="{% url 'competitionactivity_update' slug=activity.slug %}" 
                       class="flex items-center justify-between px-4 py-3 bg-slate-700/50 hover:bg-slate-700 text-white rounded-lg text-sm font-medium transition-colors">
                        <span><i class="fas fa-edit mr-2"></i> Edit Activity</span>
                        <i class="fas fa-chevron-right text-xs opacity-50"></i>
                    </a>
                    
                    <a href="{% url 'competition_create' %}?activity={{ activity.slug }}" 
                       class="flex items-center justify-between px-4 py-3 bg-indigo-600/20 hover:bg-indigo-600/30 text-indigo-300 rounded-lg text-sm font-medium transition-colors border border-indigo-500/30">
                        <span><i class="fas fa-plus-circle mr-2"></i> Create Competition</span>
                        <i class="fas fa-chevron-right text-xs opacity-50"></i>
                    </a>
                    
                    {% if activity.is_active %}
                    <button type="button" 
                            class="w-full flex items-center justify-between px-4 py-3 bg-amber-900/30 hover:bg-amber-800/30 text-amber-300 rounded-lg text-sm font-medium transition-colors border border-amber-700/30">
                        <span><i class="fas fa-ban mr-2"></i> Deactivate</span>
                    </button>
                    {% else %}
                    <button type="button" 
                            class="w-full flex items-center justify-between px-4 py-3 bg-green-900/30 hover:bg-green-800/30 text-green-300 rounded-lg text-sm font-medium transition-colors border border-green-700/30">
                        <span><i class="fas fa-check-circle mr-2"></i> Activate</span>
                    </button>
                    {% endif %}
                    
                    <button type="button" 
                            class="w-full flex items-center justify-between px-4 py-3 bg-red-900/30 hover:bg-red-800/30 text-red-300 rounded-lg text-sm font-medium transition-colors border border-red-700/30 mt-2">
                        <span><i class="fas fa-trash-alt mr-2"></i> Delete Activity</span>
                    </button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Sidebar -->
    <div class="space-y-6">
        <!-- Activity Stats -->
        <div class="bg-slate-800/50 backdrop-blur-sm rounded-xl p-6 border border-slate-700/50">
            <h3 class="text-lg font-semibold text-white mb-4">Activity Stats</h3>
            
            <div class="space-y-4">
                <div class="flex items-center justify-between">
                    <div class="flex items-center">
                        <div class="p-2 rounded-lg bg-indigo-600/20 text-indigo-300 mr-3">
                            <i class="fas fa-trophy"></i>
                        </div>
                        <div>
                            <p class="text-sm font-medium text-gray-300">Total Competitions</p>
                            <p class="text-2xl font-bold text-white">{{ activity.competition_set.count }}</p>
                        </div>
                    </div>
                </div>
                
                <div class="flex items-center justify-between">
                    <div class="flex items-center">
                        <div class="p-2 rounded-lg bg-green-600/20 text-green-300 mr-3">
                            <i class="fas fa-users"></i>
                        </div>
                        <div>
                            <p class="text-sm font-medium text-gray-300">Total Participants</p>
                            <p class="text-2xl font-bold text-white">{{ total_participants|default:'0' }}</p>
                        </div>
                    </div>
                </div>
                
                <div class="pt-4 border-t border-slate-700/50">
                    <p class="text-sm font-medium text-gray-300 mb-2">Activity Status</p>
                    <div class="flex items-center">
                        <span class="inline-flex items-center px-3 py-1 rounded-full text-xs font-medium {% if activity.is_active %}bg-green-900/30 text-green-300{% else %}bg-slate-700/50 text-slate-300{% endif %}">
                            {% if activity.is_active %}
                            <i class="fas fa-check-circle mr-1.5"></i> Active
                            {% else %}
                            <i class="fas fa-times-circle mr-1.5"></i> Inactive
                            {% endif %}
                        </span>
                        <span class="ml-2 text-xs text-gray-400">
                            {% if activity.is_active %}
                            This activity is visible in competitions
                            {% else %}
                            This activity is hidden from competitions
                            {% endif %}
                        </span>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Activity Details -->
        <div class="bg-slate-800/50 backdrop-blur-sm rounded-xl p-6 border border-slate-700/50">
            <h3 class="text-lg font-semibold text-white mb-4">Activity Details</h3>
            
            <div class="space-y-4">
                <div>
                    <p class="text-sm font-medium text-gray-300">Created</p>
                    <p class="text-sm text-white">{{ activity.created_at|date:"F j, Y" }}</p>
                    <p class="text-xs text-gray-400">{{ activity.created_at|timesince }} ago</p>
                </div>
                
                {% if activity.updated_at %}
                <div class="pt-4 border-t border-slate-700/50">
                    <p class="text-sm font-medium text-gray-300">Last Updated</p>
                    <p class="text-sm text-white">{{ activity.updated_at|date:"F j, Y" }}</p>
                    <p class="text-xs text-gray-400">{{ activity.updated_at|timesince }} ago</p>
                    {% if activity.updated_by %}
                    <p class="text-xs text-gray-400 mt-1">
                        by {{ activity.updated_by.get_full_name|default:activity.updated_by.username }}
                    </p>
                    {% endif %}
                </div>
                {% endif %}
                
                <div class="pt-4 border-t border-slate-700/50">
                    <p class="text-sm font-medium text-gray-300 mb-2">Activity Type</p>
                    <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-slate-700/50 text-slate-300">
                        {{ activity.get_activity_type_display }}
                    </span>
                </div>
                
                {% if activity.points %}
                <div class="pt-4 border-t border-slate-700/50">
                    <p class="text-sm font-medium text-gray-300 mb-2">Points</p>
                    <div class="flex items-center">
                        <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-amber-900/30 text-amber-300">
                            <i class="fas fa-star mr-1"></i> {{ activity.points }} points
                        </span>
                    </div>
                </div>
                {% endif %}
            </div>
        </div>
        
        <!-- Quick Actions -->
        <div class="bg-slate-800/50 backdrop-blur-sm rounded-xl p-6 border border-slate-700/50">
            <h3 class="text-lg font-semibold text-white mb-4">Quick Actions</h3>
            
            <div class="space-y-3">
                <a href="{% url 'competitionactivity_update' slug=activity.slug %}" 
                   class="flex items-center justify-between px-4 py-3 bg-slate-700/50 hover:bg-slate-700 text-white rounded-lg text-sm font-medium transition-colors">
                    <span><i class="fas fa-edit mr-2"></i> Edit Activity</span>
                    <i class="fas fa-chevron-right text-xs opacity-50"></i>
                </a>
                
                <a href="{% url 'competition_create' %}?activity={{ activity.slug }}" 
                   class="flex items-center justify-between px-4 py-3 bg-indigo-600/20 hover:bg-indigo-600/30 text-indigo-300 rounded-lg text-sm font-medium transition-colors border border-indigo-500/30">
                    <span><i class="fas fa-plus-circle mr-2"></i> Create Competition</span>
                    <i class="fas fa-chevron-right text-xs opacity-50"></i>
                </a>
                
                {% if activity.is_active %}
                <button type="button" 
                        class="w-full flex items-center justify-between px-4 py-3 bg-amber-900/30 hover:bg-amber-800/30 text-amber-300 rounded-lg text-sm font-medium transition-colors border border-amber-700/30">
                    <span><i class="fas fa-ban mr-2"></i> Deactivate</span>
                </button>
                {% else %}
                <button type="button" 
                        class="w-full flex items-center justify-between px-4 py-3 bg-green-900/30 hover:bg-green-800/30 text-green-300 rounded-lg text-sm font-medium transition-colors border border-green-700/30">
                    <span><i class="fas fa-check-circle mr-2"></i> Activate</span>
                </button>
                {% endif %}
                
                <button type="button" 
                        class="w-full flex items-center justify-between px-4 py-3 bg-red-900/30 hover:bg-red-800/30 text-red-300 rounded-lg text-sm font-medium transition-colors border border-red-700/30 mt-2">
                    <span><i class="fas fa-trash-alt mr-2"></i> Delete Activity</span>
                </button>
            </div>
        </div>
    </div>
</div>

<!-- Tabs powered by Alpine.js via x-data/x-init above -->
{% endblock %}
